@inject SysSageKingMessageAttributeService dataDetailService

<Card Title="@Title" Style="height:100%; min-height:600px">
    <Form @ref="form"
          Model="@model"
          ValidateOnChange="true"
          Layout="@FormLayout.Horizontal"
          LabelColSpan="8" WrapperColSpan="20">

        <FormItem Label="属性名称">
            <Input ShowCount MaxLength="64" @bind-Value="@model.Name" />
        </FormItem>

        <FormItem Label="属性类型">
            <Select @bind-Value="@model.Type"
                    DefaultValue="@(DataStreamTypeEnum.String)"
                    Style="width: 100%;"
                    TItemValue="DataStreamTypeEnum"
                    TItem="string">
                <SelectOptions>
                    <SelectOption Value="@(DataStreamTypeEnum.String)" Label="String" />
                    <SelectOption Value="@(DataStreamTypeEnum.Int8)" Label="sbyte" />
                    <SelectOption Value="@(DataStreamTypeEnum.Int32)" Label="int" />
                    <SelectOption Value="@(DataStreamTypeEnum.Int64)" Label="long" />
                    <SelectOption Value="@(DataStreamTypeEnum.Float32)" Label="float" />
                </SelectOptions>
            </Select>
        </FormItem>

        <FormItem WrapperColOffset="10">
            <Button Type="@ButtonType.Primary" @onclick="Save" Loading="@loading">新增属性</Button>
            <Button Type="@ButtonType.Primary" @onclick="Reset">重置</Button>
        </FormItem>

    </Form>

</Card>
@code {
    [Parameter]
    public string Title{ get; set; }

    [Parameter]
    public SysSageKingMessageAttribute model { get; set; }

    bool loading;
    AntDesign.Form<SysSageKingMessageAttribute> form;

    private async void Save()
    {
        if (!form.Validate())
        {
            return;
        };

        if (model.Id <= 0)
        {
            await dataDetailService.Add(model);
        }
        else
        {
            await dataDetailService.Update(model);
        }
    }

    private void Reset()
    {
        model = new SysSageKingMessageAttribute();
        form.Reset();
    }
}
