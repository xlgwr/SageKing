@inject SysSageKingMessageService dataService

<Form @ref="form"
      Model="@model"
      ValidateOnChange="true"
      LabelColSpan="8" WrapperColSpan="16">

    <Row Gutter="24">
        <Col Span="12">
        <FormItem Label="名称">
            <Input ShowCount MaxLength="64" @bind-Value="@context.Name" />
        </FormItem>
        </Col>
        <Col Span="12">
        <FormItem Label="类型">
            <Select @bind-Value="@context.Type"
                    DefaultValue="@(0)"
                    Style="width: 100%;"
                    TItemValue="int"
                    TItem="string">
                <SelectOptions>
                    <SelectOption Value="@(1)" Label="DB表类" />
                    <SelectOption Value="@(2)" Label="业务类" />
                    <SelectOption Value="@(3)" Label="通知类" />
                    <SelectOption Value="@(4)" Label="行情类" />
                </SelectOptions>
            </Select>
        </FormItem>
        </Col>
    </Row>
    <Row Gutter="24">
        <Col Span="12">
        <FormItem Label="是否启用" LabelColSpan="6" WrapperColSpan="6" WrapperColOffset="4">
            <Switch @bind-Value="@context.Status" CheckedChildren="开" UnCheckedChildren="关"></Switch>
        </FormItem>
        </Col>
    </Row>
    <Row Gutter="24">
        <Col Span="24">
        <FormItem Label="描述信息" LabelColSpan="4" WrapperColSpan="20">
            <TextArea ShowCount MaxLength="200" Width="100%" Placeholder="描述信息" @bind-Value="@context.Description"></TextArea>
        </FormItem>
        </Col>
    </Row>
</Form>

@code {
    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public SysSageKingMessage model { get; set; }

    bool loading;
    AntDesign.Form<SysSageKingMessage> form;

    public async Task<bool> Save()
    {
        if (!form.Validate())
        {
            return false;
        };

        if (model.Id <= 0)
        {
            await dataService.Add(model);
        }
        else
        {
            await dataService.Update(model);
        }
        return true;
    }

    public void Reset()
    {
        model = new SysSageKingMessage();
        form.Reset();
    }

}